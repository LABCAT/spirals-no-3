(this["webpackJsonpspirals-no-3"]=this["webpackJsonpspirals-no-3"]||[]).push([[0],{15:function(t,e,s){},31:function(t,e,s){"use strict";s.r(e);var i=s(1),n=s.n(i),a=s(9),o=s.n(a),r=(s(15),s(2));window.p5=r;s(20);var d=s(10),h=s(0);function c(){return Object(h.jsxs)("svg",{id:"play-icon",className:"fade-out",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(h.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(h.jsx)("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]})}class l{constructor(t,e,s,i){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.p=t,this.x=e,this.y=s,this.stroke=i,this.theta=[],this.dir=[],this.r=[],this.rdir=[],this.c=[],this.n=128,this.maxThetaMultiplier=this.p.random([.5,1,2,4]),this.thetaDirectionDivisor=this.p.random([200,100,50,25]),this.strokeWeight=t.random([6,8,10]),this.scale=n,this.clockwise=Math.random()<.5?1:-1,this.setup()}setup(){for(let t=0;t<this.n;t++)this.theta.push(this.p.random(0,this.maxThetaMultiplier*this.p.PI)),this.dir.push(this.clockwise),this.r.push(this.p.random(32,512)),this.rdir.push(this.clockwise),this.c.push(this.p.createVector(this.p.width/4,this.p.height/4))}update(){}draw(){this.p.strokeWeight(this.strokeWeight),this.p.stroke(this.stroke),this.scale&&this.p.scale(.5);for(let t=0;t<this.n;t++){this.theta[t]=this.theta[t]+this.p.PI/this.thetaDirectionDivisor*this.dir[t],this.rdir[t]=this.checkr(this.rdir[t],this.r[t]),this.r[t]=this.r[t]+this.rdir[t];let e=this.c[t].x+this.r[t]*this.p.cos(this.theta[t]),s=this.c[t].y+this.r[t]*this.p.sin(this.theta[t]);this.p.point(e,s)}this.scale&&this.p.scale(2)}checkr(t,e){return 1===t&&e>380&&(t=-1),-1===t&&e<0&&(t=1),t}}var u=s.p+"static/media/spirals-no-3.f3fdd4b5.ogg",p=s.p+"static/media/spirals-no-3.8c956279.mid";var g=()=>{const t=Object(i.useRef)(),e=t=>{t.canvas=null,t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.audioLoaded=!1,t.player=null,t.PPQ=15360,t.loadMidi=()=>{d.Midi.fromUrl(p).then((function(e){console.log(e);const s=e.tracks[4].notes;t.scheduleCueSet(s,"executeCueSet1");const i=e.tracks[6].notes;t.scheduleCueSet(i,"executeCueSet2"),t.audioLoaded=!0,document.getElementById("loader").classList.add("loading--complete"),document.getElementById("play-icon").classList.remove("fade-out")}))},t.preload=()=>{t.song=t.loadSound(u,t.loadMidi),t.song.onended(t.logCredits)},t.scheduleCueSet=function(e,s){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1,a=1;for(let o=0;o<e.length;o++){const r=e[o],{ticks:d,time:h}=r;(d!==n||i)&&(r.currentCue=a,t.song.addCue(h,t[s],r),n=d,a++)}},t.spirals=[],t.centreSpirals=[],t.colourSet=[],t.darkMode=0,t.setup=()=>{t.canvas=t.createCanvas(t.canvasWidth,t.canvasHeight),t.colorMode(t.HSB),t.darkMode=Math.random()>.5?0:100,t.background(0,0,t.darkMode)},t.draw=()=>{if(t.audioLoaded&&t.song.isPlaying()&&t.spirals.length){if(t.strokeWeight(32),t.fill(0,0,t.darkMode,.05),t.stroke(t.spirals[0].stroke),t.rect(0,0,t.width,t.height),t.centreSpirals.length)for(let e=0;e<t.centreSpirals.length;e++){const s=t.centreSpirals[e];t.translate(s.x,s.y),s.draw(),t.translate(-s.x,-s.y)}for(let e=0;e<t.spirals.length;e++){const s=t.spirals[e];t.translate(s.x,s.y),s.draw(),t.translate(-s.x,-s.y)}}},t.executeCueSet1=e=>{let{currentCue:s}=e;(s-1)%5===0&&(t.spirals=[],t.colourSet=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=[],o=0;for(;o<4;){e=(e+=90*o)<360?e:e-360;const r=t.color(e,s,i,n);a.push(r),o++}return a}(t,t.random(0,360),100,100,.8));const i=(s-1)%5<4?(s-1)%5:0;t.spirals[(s-1)%5]=new l(t,t.random(0,t.width/2),t.random(0,t.height/1.25),t.colourSet[i])},t.executeCueSet2=e=>{let{currentCue:s}=e;t.spirals.length&&((s-1)%5===0&&(t.centreSpirals=[]),t.centreSpirals[(s-1)%5]=new l(t,t.width/2,t.height/2,t.random(t.colourSet),!1),t.centreSpirals[(s-1)%5].stroke=t.spirals[(s-1)%5].stroke)},t.hasStarted=!1,t.mousePressed=()=>{t.audioLoaded&&(t.song.isPlaying()?t.song.pause():(parseInt(t.song.currentTime())>=parseInt(t.song.buffer.duration)&&(t.reset(),"undefined"!==typeof window.dataLayer&&window.dataLayer.push({event:"play-animation",animation:{title:document.title,location:window.location.href,action:"replaying"}})),document.getElementById("play-icon").classList.add("fade-out"),t.canvas.addClass("fade-in"),t.song.play(),"undefined"===typeof window.dataLayer||t.hasStarted||(window.dataLayer.push({event:"play-animation",animation:{title:document.title,location:window.location.href,action:"start playing"}}),t.hasStarted=!1)))},t.creditsLogged=!1,t.logCredits=()=>{!t.creditsLogged&&parseInt(t.song.currentTime())>=parseInt(t.song.buffer.duration)&&(t.creditsLogged=!0,console.log("Music By: http://labcat.nz/","\n","Animation By: https://github.com/LABCAT/"),t.song.stop())},t.reset=()=>{},t.updateCanvasDimensions=()=>{t.canvasWidth=window.innerWidth,t.canvasHeight=window.innerHeight,t.canvas=t.resizeCanvas(t.canvasWidth,t.canvasHeight)},window.attachEvent?window.attachEvent("onresize",(function(){t.updateCanvasDimensions()})):window.addEventListener&&window.addEventListener("resize",(function(){t.updateCanvasDimensions()}),!0)};return Object(i.useEffect)((()=>{new r(e,t.current)}),[]),Object(h.jsx)("div",{ref:t,children:Object(h.jsx)(c,{})})};var w=function(){return Object(h.jsx)(g,{})};o.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.e606d113.chunk.js.map